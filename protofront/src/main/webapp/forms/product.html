<div style="margin: 20px 0;"></div>
<div class="easyui-panel" title="Product" style="width: 800px">
	<div class="easyui-panel" style="padding: 5px;">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			data-options="iconCls:'icon-add',plain:true" onclick="newProduct()">New</a>
		<a href="javascript:void(0)" class="easyui-linkbutton"
			data-options="iconCls:'icon-remove',plain:true"
			onclick="removeProduct()">Remove</a> <a href="javascript:void(0)"
			class="easyui-linkbutton"
			data-options="iconCls:'icon-save',plain:true"
			onclick="acceptProduct()">Accept</a> <a href="javascript:void(0)"
			class="easyui-linkbutton"
			data-options="iconCls:'icon-undo',plain:true"
			onclick="rejectProduct()">Reject</a> <a href="javascript:void(0)"
			class="easyui-linkbutton"
			data-options="iconCls:'icon-search',plain:true"
			onclick="searchProduct()">Search</a>
	</div>
	<div style="padding: 10px 60px 20px 60px">
		<form id="productForm" method="post">

			<h3>Select product type</h3>
			<input id="productType" class="easyui-combotree"
				style="width: 600px;"
				data-options="url:'/protofront/service/productType/getByParentTypeIdByLanguageId/'
								+ $('#langSelector').combobox('getValue')">

			<table id="edgProducts" title="Products" singleSelect="true"
				style="width: 700px; height: auto">
				<thead>
					<tr>
						<th field='id' width=250>Product Id</th>
						<th field='productTypeId' width=250 editor="text">Product
							Type Id</th>
						<th field='name' width=250 editor="text">Product name</th>
					</tr>
				</thead>
			</table>

			<script>
				$("#productType")
						.combotree(
								{
									onSelect : function(record) {
										console.log(record);
										var lId = $('#langSelector').combobox(
												'getValue');
										$("#edgProducts")
												.edatagrid(
														{
															url : '/protofront/service/product/prodListByProdTypeIdByLanguageId/'
																	+ record.id
																	+ '&' + lId,
															saveUrl : '/protofront/service/productType/saveName/',
															updateUrl : '/protofront/service/productType/saveName/',
															destroyUrl : '/protofront/service/productType/deleteName/'

														});
									}
								});
			</script>
			<div id="aa" class="easyui-accordion"
				style="width: 300px; height: 200px;">
				<div title="Additional data" data-options="iconCls:'icon-save'"
					style="overflow: auto; padding: 10px;">
					<h3 style="color: #0099FF;">Accordion for jQuery</h3>
					<table id="edgNames" title="Translations" singleSelect="true"
						style="width: 700px; height: auto">
						<thead>
							<tr>
								<th field='nameId' width=250>Product Type Name Id</th>
								<th
									data-options="field:'languageId',width:100,
                        	formatter:function(value,row){
                            return row.languageName;
                        },
                        editor:{
                            type:'combobox',
                            options:{
                                valueField:'id',
                                textField:'name',
                                method:'get',
                                url:'/protofront/service/masterdata/languagelist',
                                required:true
                            }
                        }">Language</th>
								<th field='productName' width=250 editor="text">Product
									Name</th>
							</tr>
						</thead>
					</table>
				</div>
				<div title="Title2"
					data-options="iconCls:'icon-reload',selected:true"
					style="padding: 10px;">content2</div>
				<div title="Title3">content3</div>
			</div>
		</form>

	</div>
</div>

<script>
	function acceptProduct() {
		$('#productForm').form('submit', {
			url : "/protofront/service/product/submit",
			onSubmit : function() {
				// do some check
				// return false to prevent submit;
			},
			success : function(data) {
				var jo = JSON.parse(data);
				console.log(jo);
				$('#productForm').form('load', jo);
			}
		});
	}
	function newProduct() {
		$('#productForm').form('clear');
	}
	function searchProduct() {
		$('#productForm').form('load',
				'/protofront/service/product/findByID/' + $('#id').val());

		$('#dg').datagrid({
			url : '/protofront/service/product/names/' + $('#id').val()
		});

	}
</script>