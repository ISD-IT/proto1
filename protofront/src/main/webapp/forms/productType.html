<div>

	<div id="mm" class="easyui-menu" style="width: 120px;">
		<div data-options="iconCls:'icon-add'" onclick="newNode()">New
			Node</div>
		<div data-options="iconCls:'icon-remove'"
			onclick="javascript:alert('delete')">Delete Node</div>
		<div data-options="iconCls:'icon-cut'"
			onclick="javascript:alert('cut')">Cut</div>
		<div data-options="iconCls:'icon-back'"
			onclick="javascript:alert('paste')">Paste</div>
	</div>

	<table id="productTypes" title="Product Types" class="easyui-treegrid"
		style="width: 700px; height: 300px"></table>
	<table id="dg" class="easyui-datagrid" title="Translations"
		style="width: 700px; height: auto"
		data-options="
                iconCls: 'icon-edit',
                singleSelect: true,
                method:'get',
                toolbar: '#tb'
            ">
		<thead>
			<tr>
				<th
					data-options="field:'languageId',width:100,
                        	formatter:function(value,row){
                            return row.languageName;
                        },
                        editor:{
                            type:'combobox',
                            options:{
                                valueField:'id',
                                textField:'name',
                                method:'get',
                                url:'/protofront/service/masterdata/languagelist',
                                required:true
                            }
                        }">Language</th>
				<th data-options="field:'productTypeName',width:250,editor:'text'">Product Type Name</th>
			</tr>
		</thead>
	</table>
	

</div>

<script>
	$('#productTypes')
			.treegrid(
					{
						url : '/protofront/service/productType/getByParentTypeIdByLanguageId/'
								+ $('#langSelector').combobox('getValue'),
						idField : 'id',
						treeField : 'name',
						columns : [ [ {
							title : 'Product Types',
							field : 'name',
							width : 400
						} ] ],
						onSelect :function(data) {
							console.log(data['id']);
							$('#dg').datagrid({
								url : '/protofront/service/productType/getNames/' + data['id']
							});
						},
		                onContextMenu: function(e,row){
		                    e.preventDefault();
		                    $(this).treegrid('select',row.id);
		                    $('#mm').menu('show',{
		                        left: e.pageX,
		                        top: e.pageY
		                    });
		                }
					});

	 
	 function newNode() {
		 var node = $('#productTypes').treegrid('getSelected');
		 if (node){
		     var nodes = [{
		         "id":13,
		         "name":"Raspberry"
		     }];
		     $('#productTypes').treegrid('append', {
		         parent:node.target,
		         data:nodes
		     });
		 }
	 }
	 
	 function removeNode() {
		 alert('Remove node');
	 }

</script>
